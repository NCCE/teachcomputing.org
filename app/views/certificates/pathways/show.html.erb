<% meta_tag :title, 'Primary certificate - Teach Computing' %>
<%= render partial: 'hero' %>
<div class="govuk-width-container">
  <%= render BreadcrumbComponent.new(ancestors: [[@programme.path, @programme.title]], current_page_name: @pathway.title) %>
  <main class="govuk-main-wrapper govuk-main-wrapper--xl">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        <section class="ncce-section govuk-!-margin-top-0">
          <p class="govuk-body-s">I need to get the intro copy text into here. I deally this would be done by pulling it from the database because ahrd coding it would be daft</p>
        </section>
        <section class="ncce-section ncce-pathway__learning-pathway-section">
          <h2 class="govuk-heading-m"><%= t('.learning_pathway.title') %></h2>
          <p class="govuk-body-s"><%= t('.learning_pathway.description') %></p>
          <hr class="ncce-pathway__hr">
          <div class="ncce-pathway__course-list govuk-body-s">
            <% if @pathway.present? %>
              <div data-controller='expander' data-expander-expand-value="Show" data-expander-colapse-value="Hide">
                <p class="govuk-!-margin-top-0">
                    <button data-action="expander#toggleAll"
                            data-expander-target="expanderButton"
                            start-expanded="true"
                            aria-expanded="true"
                            class="govuk-body expander__button-round recommended-courses-wrapper_expander-button"
                            data-event-action="click"
                            data-event-label="Show additional courses"
                            data-event-category="CSA enrolled">
                        <strong data-expander-target="expanderButtonText">Hide</strong>
                    </button>
                </p>

                <div data-expander-target="expander" class="expander">
                  <% @recommended_activities.each do |pa| %>
                    <div class="ncce-pathway-courses__course">
                      <p class="ncce-pathway-courses__link">
                        <%= link_to pa.title, course_path(id: pa.stem_activity_code, name: pa.slug), class: 'ncce-link' if pa.stem_activity_code %>
                      </p>

                      <div class="ncce-grid__no-space-between">
                        <p class="ncce-pathway-courses__location <%= activity_icon_class(pa) %> govuk-!-margin-top-0">
                          <%= activity_type(pa) %>
                        </p>
                        <p class="ncce-pathway-courses__location icon-clock govuk-!-margin-top-0">
                          <% course = Achiever::Course::Template.find_by_activity_code(pa.stem_activity_code)%>
                          <%= pluralize(course.duration_value, course.duration.downcase.chomp('s')) if course.duration.present? %>
                        </p>
                      </div>
                    </div>
                  <% end %>
                </div>
              </div>
            <% end %>
            <p class="govuk-body-s">More courses can be found in the <%= link_to 'pathway PDF', '#' %></p>
          </div>
          <hr class="ncce-pathway__hr">
          <div class="ncce-pathway__course-list">
            <% @community_groups.each do |group| %>
              <div data-controller='expander' data-expander-expand-value="Show" data-expander-colapse-value="Hide">
                <p class="govuk-!-margin-top-0">
                    <button data-action="expander#toggleAll"
                            data-expander-target="expanderButton"
                            start-expanded="false"
                            aria-expanded="false"
                            class="govuk-body expander__button-round recommended-courses-wrapper_expander-button"
                            data-event-action="click"
                            data-event-label="Show additional courses"
                            data-event-category="CSA enrolled">
                        <strong data-expander-target="expanderButtonText">Hide</strong>
                    </button>
                </p>

                <div data-expander-target="expander" class="expander">
                  <% group.programme_activities.includes(:activity).each do |programme_activity| %>
                    <div class="ncce-pathway-courses__course">
                      <p class="ncce-pathway-courses__link">
                        <%= link_to programme_activity.activity.title, '#', class: 'ncce-link' %>
                      </p>
                      <p class="govuk-body-s">
                        <%= programme_activity.activity.description.html_safe %>
                      </p>
                    </div>
                  <% end %>
                </div>
              </div>
              <hr class="ncce-pathway__hr">
            <% end %>
          <div>
        </section>
      </div>

      <div class="govuk-grid-column-one-third">
        <%= render AsideComponent.new(
          title: 'How to enrol'
        ) do |component| %>
          <% component.with_body do %>
            <ol class="govuk-body-s">
              <li>
                Successfully complete
                <%= link_to 'the Computer Science Accelerator programme', '#' %>
              </li>
              <li>
                Enrol with the click of a button
              </li>
              <li>
                Complete the required professional development, engagement, and community activities to recieve your qualification
              </li>
            </ol>
            <p class="govuk-body-s">
              Already have a STEM learning account? Simply
              <%= link_to 'log in', '#' %>
            </p>
          <% end %>
        <% end %>
        <%= render AsideComponent.new(
          title: 'Teachers following this pathway will contribute to improving:'
        ) do |component| %>
          <% component.with_body do %>
            <ul class="govuk-body-s">
              <li>Staff Development</li>
              <li>Teaching, Learning and Assesment</li>
            </ul>
            <p class="govuk-body-s">
              As defined in the
              <%= link_to 'Computing Quality Framework', '#' %>
              .
            </p>
          <% end %>
        <% end %>
        <%= render AsideComponent.new(
          title: 'Download the pathway PDF'
        ) do |component| %>
          <% component.with_body do %>
            Download our <b>supporting other teachers</b> pathway PDF to reference as you progress through the certificate.
          <% end %>
        <% end %>
        <%= render BursaryComponent.new %>
      </div>
      <% if true # should_show_other_pathways?(@programme) %>
        <div class="govuk-grid-column-full">
          <hr class="ncce-pathways__hr">
          <%= render BorderedCardsComponent.new(
            cards: programme_pathway_card_data(@programme, exclude: @pathway),
            cards_per_row: 3,
            class_name: 'bordered-cards__green-tops'
          ) %>
        </div>
      <% end %>
    </div>
  </main>
</div>
